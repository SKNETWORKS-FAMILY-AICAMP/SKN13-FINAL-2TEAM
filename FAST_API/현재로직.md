# 현재 '님이 좋아할 만한 콘텐츠' 추천 로직 상세 설명

'님이 좋아할 만한 콘텐츠' 섹션은 사용자의 스타일 취향과 체형, 그리고 선호 색상을 모두 고려하여 가장 적합한 의류를 추천하는 방식으로 동작합니다.

이 추천 시스템은 세 단계의 필터링 과정을 거쳐 최종 결과를 도출하며, 데이터 부족 시 대체 로직을 포함합니다.

### 1단계: 스타일 기반 1차 필터링 (전체 상품 대상)

*   **무엇을 하는가:** 먼저, 당신이 설문조사에서 선택한 **대표 스타일**(예: 'Casual', 'Street', 'Formal', 'Minimal' 중 하나)을 확인합니다.
*   **어떻게 하는가:** 시스템 내부에 정의된 **'스타일-카테고리 매핑'** 정보(예: 'Formal' 스타일에는 '셔츠블라우스', '슈트 팬츠/슬랙스', '미디원피스' 등이 포함됨)를 활용합니다.
*   **결과:** 전체 의류 상품 데이터(`clothing_data`)에서 당신의 대표 스타일에 해당하는 **모든 상품들만 1차적으로 걸러냅니다.** 이 단계에서 이미 당신의 취향과 맞지 않는 스타일의 옷들은 모두 제외됩니다.

### 2단계: 체형 기반 2차 필터링 (스타일 필터링된 상품 대상) 및 대체 로직

*   **무엇을 하는가:** 1단계에서 걸러진 **'당신의 스타일에 맞는 상품들'** 중에서, 당신에게 가장 잘 어울릴 만한 상품을 찾아냅니다.
*   **어떻게 하는가:**
    1.  당신의 키와 몸무게 정보를 바탕으로, 당신과 **체형이 비슷한 다른 사용자들**을 찾아냅니다.
    2.  이 '체형이 비슷한 사용자들'이 1단계에서 필터링된 **'당신의 스타일에 맞는 상품들' 중에서 어떤 것을 가장 많이 찜했는지** 분석합니다.
*   **결과:**
    *   만약 2단계 필터링 결과(체형 기반 개인화)가 충분하다면, 해당 상품들이 다음 단계로 넘어갑니다.
    *   **하지만, 2단계 필터링 결과가 비어있을 경우 (즉, 스타일이 맞으면서 체형도 비슷한 사용자가 찜한 상품이 없다면), 1단계에서 필터링된 상품 목록(`style_filtered_clothing_data`) 전체를 다음 단계로 넘깁니다.**

### 3단계: 선호 색상 3차 필터링 (최종 결과 대상)

*   **무엇을 하는가:** 2단계까지의 필터링을 거친 상품 목록에서, 당신이 선호하는 색상에 맞는 상품들만 최종적으로 걸러냅니다.
*   **어떻게 하는가:** `filter_products_by_color` 함수를 사용하여, 2단계 결과 상품들 중 당신의 `preferred_color`에 해당하는 상품들만 선택합니다.
*   **결과:** 이 필터링을 거친 상품들이 최종적으로 "님이 좋아할 만한 콘텐츠"로 화면에 표시됩니다.

### 요약

이 세 단계의 과정을 통해, 추천되는 옷들은 단순히 인기 있는 옷이 아니라 **"당신의 스타일에 맞으면서, 당신과 비슷한 체형의 사람들이 실제로 좋아하고, 당신이 선호하는 색상인"** 매우 개인화되고 정교한 추천이 됩니다. 또한, 데이터 부족으로 인한 추천 공백을 방지하기 위해 **선호 스타일에 맞는 상품들을 최소한으로라도 제공**하는 대체 로직이 포함되어 있습니다.
