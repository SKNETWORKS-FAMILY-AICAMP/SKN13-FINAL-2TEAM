{% extends "base.html" %}

{% block content %}
    <div class="login-container">
        <form class="login-form" method="post" action="/auth/login">
            <h1>로그인</h1>
            {% if error %}
            <p style="color: red; text-align: center;">{{ error }}</p>
            {% endif %}
            <div class="input-group">
                <input type="text" name="username" placeholder="아이디" required>
            </div>
            <div class="input-group">
                <input type="password" name="password" placeholder="비밀번호" required>
            </div>
            <button type="submit" class="login-button">로그인</button>
            <div class="form-help">
                <div class="remember-me">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe">로그인 정보 저장</label>
                </div>
                <a href="#" class="need-help">도움이 필요하신가요?</a>
            </div>
            <div class="signup-link">
                <p>아직 회원이 아니신가요? <a href="/auth/signup">회원가입</a></p>
            </div>
            <div class="social-login">
            <!-- Google 로그인 버튼 (이미지 전체가 클릭 가능) -->
                <a href="/auth/google/login">
                    <img src="/static/img/google_icon.svg" alt="Google 로그인" class="login-image-button">
                </a>

            <!-- Kakao 로그인 버튼 -->
                <a href="/auth/kakao/login">
                    <img src="/static/img/kakao_icon.png" alt="Kakao 로그인" class="login-image-button">
                </a>
            </div> 
        </form>
    </div>

    <script>
        // 로그인 페이지 로드 시 챗봇 세션 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 챗봇 세션 ID 초기화
            if (localStorage.getItem('chatbot_session_id')) {
                console.log('로그인 페이지: 챗봇 세션 초기화');
                localStorage.removeItem('chatbot_session_id');
            }
            
            // 기타 챗봇 관련 데이터도 초기화
            const chatbotKeys = ['chatbot_session_id', 'chatbot_messages', 'chatbot_state'];
            chatbotKeys.forEach(key => {
                if (localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                }
            });
        });
    </script>
{% endblock %}